import Head from 'next/head';
import { GetServerSideProps } from 'next';
import styles from '../styles/Home.module.css';
import { Heading, UnorderedList, ListItem, Link, Text } from '@chakra-ui/react';
import { ExternalLinkIcon } from '@chakra-ui/icons';

export default function Home() {
  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className={styles.main}>
        <Heading as="h1" size="3xl" noOfLines={1}>
          Welcome to Pub Quiz Hackathon ðŸ’»
        </Heading>
        <Text>Stack we are gonna use</Text>

        <UnorderedList>
          <ListItem>
            <Link href="https://nextjs.org/docs" isExternal>
              NextJS 13 <ExternalLinkIcon mx="2px" />
            </Link>
          </ListItem>
          <ListItem>
            <Link href="https://chakra-ui.com/docs/components/list" isExternal>
              Chakra UI <ExternalLinkIcon mx="2px" />
            </Link>
          </ListItem>
          <ListItem>
            <Link href="https://supabase.com/docs" isExternal>
              Supabase <ExternalLinkIcon mx="2px" />
            </Link>
          </ListItem>
        </UnorderedList>
        <Heading as="h2" size="2xl">
          Well, good luck :)
        </Heading>
      </main>
    </>
  );
}

export const getServerSideProps: GetServerSideProps = async (context) => {
  const get = await fetch(`https://api.github.com/users/elijahmg/repos`);
  const data = await get.json();

  console.log(data.map((repo: { name: string }) => repo.name));

  return {
    props: {
      data,
    },
  };
};
